<div class="prediction-container">
  <h1 class="prediction-heading">IPL Prediction Contest</h1>
  <div class="prediction-row">
    <button mat-fab extended class="tournament-prediction" 
        (click)="openTournamentPredictionDialog()">
      <div class="button-content">
        <mat-icon>emoji_events</mat-icon>
        <div class="text-column">
          <span class="main-text">Season Predictor</span>
          <span class="closing-text">{{ countdownText }}!</span>
        </div>
      </div>
    </button>
    <!-- <button mat-fab extended class="prediction-history"
      (click)="openPreviousPredictionsDialog()">
      <mat-icon>history</mat-icon>
       Previous predictions
    </button> -->
  </div>
  <div class="card-container">
    <ng-container *ngFor="let match of matches">
      <mat-card class="match-card">
        <mat-card-header class="match-header">
          <div mat-card-avatar></div>
        </mat-card-header>
        <mat-card-content>
          <div class="prediction-pending-badge-container">
            <span *ngIf="!match.isPredicted && !match.isLocked" 
              class="prediction-pending-badge">
              Prediction Pending
            </span>
          </div>
          <div class="team-logos">
            <div class="logo-container">
              <img [src]="match.homeLogo" alt="Team 1 Logo" class="team-logo">
            </div>
            <div class="logo-container">
              <img src="assets/ipl/versus.avif" alt="Versus Logo" class="versus-logo">
            </div>
            <div class="logo-container">
              <img [src]="match.awayLogo" alt="Team 2 Logo" class="team-logo">
            </div>
          </div>
          <p class="match-date">{{ match.dateTime | customDate }}</p>
        </mat-card-content>
        <mat-card-actions class="match-actions">
          <button mat-flat-button 
            [disabled]="match.isLocked" 
            class="predict-match-button"
            [class.has-pending]="!match.isPredicted"
            (click)="openPredictDialog(match)">
            <div class="button-content">
              <div class="text-column">
                <span class="main-text">Predict Match</span>
                <span class="closing-text" *ngIf="!match.isLocked && match.isToday">
                  locks at {{ match.predictionLockingTime }} IST
                </span>
              </div>
            </div>
          </button>
        </mat-card-actions>
      </mat-card>
    </ng-container>
  </div>
</div>
